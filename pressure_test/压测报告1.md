**测试时间**：20250401

**测试设备**：单台服务器2c4g

**测试接口**：PlayerService.register

**软件架构** ：

- Kafka（10 分区 + 5 个 Listener 线程）
- MySQL 批量插入策略，每批次 2000 条

**测试工具**：ghz

**测试数据**：1000000随机生成的用户名和邮箱

第一阶段大约前10分钟，主要进行service层的处理，cpu使用率达到100%，数据生产速度峰值在2.3k/s，消费者消费的速度仅有30k/m (500/s)，这一阶段产生了最高750k的积压数据。mysql每秒有2.5k查询语句，可能是此时的性能瓶颈。

第二阶段大约后10分钟，主要进行kafka的消费者处理，消费者消费速度在70k/m (1100/s)，cpu占用下降到60%，磁盘写入速率在8MB/s左右。

相应延迟方面，50%在4.86s，90%在6.53s，99%在8.26s，整体并没有遇到系统错误，响应延迟主要可能因为mysql的查询操作。

![image-20250402100911440](C:\Users\11867\AppData\Roaming\Typora\typora-user-images\image-20250402100911440.png)

![image-20250401202821907](C:\Users\11867\AppData\Roaming\Typora\typora-user-images\image-20250401202821907.png)

![image-20250402100121747](C:\Users\11867\AppData\Roaming\Typora\typora-user-images\image-20250402100121747.png)

![image-20250401204748910](C:\Users\11867\AppData\Roaming\Typora\typora-user-images\image-20250401204748910.png)

![image-20250401202538936](C:\Users\11867\AppData\Roaming\Typora\typora-user-images\image-20250401202538936.png)

![image-20250401202553764](C:\Users\11867\AppData\Roaming\Typora\typora-user-images\image-20250401202553764.png)